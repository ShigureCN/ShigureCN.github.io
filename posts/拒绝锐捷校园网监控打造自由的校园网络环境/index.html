<!doctype html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>拒绝锐捷校园网监控,打造自由的校园网络环境 // ShigureSora</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.148.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="ShigureSora" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css" />
    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="拒绝锐捷校园网监控,打造自由的校园网络环境">
  <meta name="twitter:description" content="观前提示：要完成消除监控，需要假设你拥有了自建的 VPS 节点，并且VPS搭建的节点是安全的，采用了先进的协议如“Reality”等，如果没有的话建议先去某一位知名YouTuber那里学一下如何搭建
前言 从去年开始，我的Azure服务器就在跑我的Word Press博客，但是个人并不喜欢Word Press的书写体验，认为Typora等众多markdown文本编辑软件是完爆Word Press的，于是将博客迁移到了GitHub pages，服务器就这样闲置了几个月，心想着服务器闲着也是闲着，跑个节点应该还是没有什么问题的，毕竟微软送给学生的100美刀也快要过期了，闲着也是浪费，于是前段时间跑了个Trojan在服务器上，但是毕竟Trojan还是使用TCP协议，拿来玩联机游戏等跑在UDP上面的话就必须要使用TCP隧道，延迟高的惊人，就没有几次能够成功使用Trojan进入过VRChat。
刚好某位知名YouTuber前段时间教了如何搭建Vless&#43;reality(TCP)以及TUIC(UDP)的方法，于是我就非常舒服的搭建了我个人独享的节点，而且是Azure这种大厂的服务器，速度又快延迟又低，除了IP一眼识别机房IP之外没有缺点。
我一开始搭建Trojan有一个比较重要的推动就是——我不想学校能看到我的一言一行，我是自由的个体，我需要一个安全的，无日志的VPN加密我的流量。于是我开始思考——如果我只采用Vless&#43;reality能做到抵抗锐捷的识别吗？如果不行，我需要用哪些方法补救？
00. 删掉锐捷客户端 是的经过1s左右的思考，我们找到了第一个绝对危险的因素——锐捷校园网认证客户端。
试想，一个具有管理员权限的间谍软件跑在你的电脑上面，这真的安全吗？他会不会发现你电脑中正在跑的代理？锐捷客户端想要访问你的网卡数据实在是太简单了，它只需要读一下就会发现异常，毕竟Intel和Realtek可没有生产过一个叫做“Clash Meta” “Mihomo” “Sing-box”的网卡，只要发现了就代表着你一定正在使用代理，至于能否通过管理员权限使用Wire Shark等类似的抓包方法查看里面的数据就不得而知了，但是这个趋势是危险的，毕竟他们已经知道了这个事实——“你在使用代理”
“等下，如果我没有锐捷认证我要怎么使用有线联网？”，你或许会这么问。这就需要你使用软路由或者想办法获取路由器的ssh/telnet权限来解决了， mentohust 是常见的解决软路由/路由器校园网认证的方案，请相信我，这一步是非常有必要的。
01. DNS解析 我们都知道，当我们输入域名的时候，我们一般需要DNS解析来获取服务器IP，那么请仔细回忆一下，你在第一天使用有线连接电脑的时候是不是网管让你修改过DNS解析的服务器，并且修改至内网IP？再做个测试，当你尝试修改Firefox的“安全DNS”选择到“最大保护”的时候，你还能够在不使用clash/v2ray的时候正常的访问网站吗？
众所周知，当本机向DNS发出获取请求的时候，你的DNS请求消息是全部明文的，学校DNS知道——“某个IP向我发出获取某个网站的请求”，而我们的IP一般都是固定的，学校只需要对应一下名单就知道是哪个宿舍的哪个床位想要访问什么东西。
这是非常危险的，但是好在最新的v2rayn已经帮我们适配好了，它会将我们的DNS请求都发给我我们的VPS，让我们的VPS帮助我们向DNS发出请求，如果你不设置的话就会默认向VPS设置的DNS提供商请求，clash的配置比较麻烦，需要自己手动修改yaml文件，或者采用线上订阅转换(有订阅泄露的风险)，不再赘述
可以使用 ipleak 来检测你的DNS有无泄露，如果上面出现的IP全都是你的服务器所在的国家，那么恭喜你，你的DNS没有泄露，如果出现了中国，那么可以尝试去YouTube搜索“DNS泄露”，会有解决方案的。
如果你不信任ipleak的解析，你也可以使用Wire Shark来抓包DNS解析记录，我的DNS分流规则是geoip查询到是cn则交给阿里云DNS，其他的交给cloud flare DNS，所以我在Wire Shark抓包得到的结果如下
（暑假我在校外，等回学校了再来拍一张校园网的来做一下对比）
02.锐捷证书 锐捷证书绝对是最危险的一环，先让我们一步步开始，讲述一下每一bit在校园网中的流动
0.“信任的‘背叛’” 首先，这一切的发生都源自于“我亲手在我的电脑里面安装并且信任了锐捷提供的根证书”，这就相当于告诉电脑“以后，凡是持有‘锐捷’这家机构签发的‘身份证’（证书）的网站，无论它自称是谁，你都必须无条件相信它是真的。”，正是这份我赋予的“信任”，被锐捷的网关设备利用，上演了一出精妙的“偷天换日”。
我们假设我们要访问 https://www.baidu.com 我们目前的系统情况是：
我 (用户电脑): 安装并信任了锐捷根证书。
中间人 (锐捷网关): 部署在校园网的出口，能拦截所有流量。
目的地 (百度服务器): 拥有合法的、由权威机构颁发的官方证书。
1.发出请求 我在浏览器地址栏输入 https://www.baidu.com 并回车。我的电脑发出一个建立HTTPS连接的请求，这个请求首先会到达锐捷网关。
2.锐捷网关拦截并兵分两路 锐捷网关收到了请求后，并没有直接把它转发给百度。而是像一个“中间人”一样，开始了它的表演：
对内（对我）: 它暂停了我的请求，说：“别急，我就是百度，我来跟你聊。”
对外（对百度）: 它自己伪装成我，向真正的百度服务器发起了一个一模一样的HTTPS连接请求。
3.锐捷网关从百度获取“正品证书” 真正的百度服务器收到了来自锐捷网关的请求，热情地回应，并把自己的官方正品证书（由权威机构签发）递给了锐捷网关。
现在，锐捷网关与百度服务器之间，建立了一条真实、安全、加密的通道。百度以为它正在和一位普通用户通信。
4.锐捷网关伪造“高仿证书”（最关键的欺骗环节！） 锐捷网关手握百度的正品证书，它看了一眼上面的信息，比如“此证书颁发给 www.baidu.com ”。">

    <meta property="og:url" content="http://localhost:1313/posts/%E6%8B%92%E7%BB%9D%E9%94%90%E6%8D%B7%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9B%91%E6%8E%A7%E6%89%93%E9%80%A0%E8%87%AA%E7%94%B1%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83/">
  <meta property="og:site_name" content="ShigureSora">
  <meta property="og:title" content="拒绝锐捷校园网监控,打造自由的校园网络环境">
  <meta property="og:description" content="观前提示：要完成消除监控，需要假设你拥有了自建的 VPS 节点，并且VPS搭建的节点是安全的，采用了先进的协议如“Reality”等，如果没有的话建议先去某一位知名YouTuber那里学一下如何搭建
前言 从去年开始，我的Azure服务器就在跑我的Word Press博客，但是个人并不喜欢Word Press的书写体验，认为Typora等众多markdown文本编辑软件是完爆Word Press的，于是将博客迁移到了GitHub pages，服务器就这样闲置了几个月，心想着服务器闲着也是闲着，跑个节点应该还是没有什么问题的，毕竟微软送给学生的100美刀也快要过期了，闲着也是浪费，于是前段时间跑了个Trojan在服务器上，但是毕竟Trojan还是使用TCP协议，拿来玩联机游戏等跑在UDP上面的话就必须要使用TCP隧道，延迟高的惊人，就没有几次能够成功使用Trojan进入过VRChat。
刚好某位知名YouTuber前段时间教了如何搭建Vless&#43;reality(TCP)以及TUIC(UDP)的方法，于是我就非常舒服的搭建了我个人独享的节点，而且是Azure这种大厂的服务器，速度又快延迟又低，除了IP一眼识别机房IP之外没有缺点。
我一开始搭建Trojan有一个比较重要的推动就是——我不想学校能看到我的一言一行，我是自由的个体，我需要一个安全的，无日志的VPN加密我的流量。于是我开始思考——如果我只采用Vless&#43;reality能做到抵抗锐捷的识别吗？如果不行，我需要用哪些方法补救？
00. 删掉锐捷客户端 是的经过1s左右的思考，我们找到了第一个绝对危险的因素——锐捷校园网认证客户端。
试想，一个具有管理员权限的间谍软件跑在你的电脑上面，这真的安全吗？他会不会发现你电脑中正在跑的代理？锐捷客户端想要访问你的网卡数据实在是太简单了，它只需要读一下就会发现异常，毕竟Intel和Realtek可没有生产过一个叫做“Clash Meta” “Mihomo” “Sing-box”的网卡，只要发现了就代表着你一定正在使用代理，至于能否通过管理员权限使用Wire Shark等类似的抓包方法查看里面的数据就不得而知了，但是这个趋势是危险的，毕竟他们已经知道了这个事实——“你在使用代理”
“等下，如果我没有锐捷认证我要怎么使用有线联网？”，你或许会这么问。这就需要你使用软路由或者想办法获取路由器的ssh/telnet权限来解决了， mentohust 是常见的解决软路由/路由器校园网认证的方案，请相信我，这一步是非常有必要的。
01. DNS解析 我们都知道，当我们输入域名的时候，我们一般需要DNS解析来获取服务器IP，那么请仔细回忆一下，你在第一天使用有线连接电脑的时候是不是网管让你修改过DNS解析的服务器，并且修改至内网IP？再做个测试，当你尝试修改Firefox的“安全DNS”选择到“最大保护”的时候，你还能够在不使用clash/v2ray的时候正常的访问网站吗？
众所周知，当本机向DNS发出获取请求的时候，你的DNS请求消息是全部明文的，学校DNS知道——“某个IP向我发出获取某个网站的请求”，而我们的IP一般都是固定的，学校只需要对应一下名单就知道是哪个宿舍的哪个床位想要访问什么东西。
这是非常危险的，但是好在最新的v2rayn已经帮我们适配好了，它会将我们的DNS请求都发给我我们的VPS，让我们的VPS帮助我们向DNS发出请求，如果你不设置的话就会默认向VPS设置的DNS提供商请求，clash的配置比较麻烦，需要自己手动修改yaml文件，或者采用线上订阅转换(有订阅泄露的风险)，不再赘述
可以使用 ipleak 来检测你的DNS有无泄露，如果上面出现的IP全都是你的服务器所在的国家，那么恭喜你，你的DNS没有泄露，如果出现了中国，那么可以尝试去YouTube搜索“DNS泄露”，会有解决方案的。
如果你不信任ipleak的解析，你也可以使用Wire Shark来抓包DNS解析记录，我的DNS分流规则是geoip查询到是cn则交给阿里云DNS，其他的交给cloud flare DNS，所以我在Wire Shark抓包得到的结果如下
（暑假我在校外，等回学校了再来拍一张校园网的来做一下对比）
02.锐捷证书 锐捷证书绝对是最危险的一环，先让我们一步步开始，讲述一下每一bit在校园网中的流动
0.“信任的‘背叛’” 首先，这一切的发生都源自于“我亲手在我的电脑里面安装并且信任了锐捷提供的根证书”，这就相当于告诉电脑“以后，凡是持有‘锐捷’这家机构签发的‘身份证’（证书）的网站，无论它自称是谁，你都必须无条件相信它是真的。”，正是这份我赋予的“信任”，被锐捷的网关设备利用，上演了一出精妙的“偷天换日”。
我们假设我们要访问 https://www.baidu.com 我们目前的系统情况是：
我 (用户电脑): 安装并信任了锐捷根证书。
中间人 (锐捷网关): 部署在校园网的出口，能拦截所有流量。
目的地 (百度服务器): 拥有合法的、由权威机构颁发的官方证书。
1.发出请求 我在浏览器地址栏输入 https://www.baidu.com 并回车。我的电脑发出一个建立HTTPS连接的请求，这个请求首先会到达锐捷网关。
2.锐捷网关拦截并兵分两路 锐捷网关收到了请求后，并没有直接把它转发给百度。而是像一个“中间人”一样，开始了它的表演：
对内（对我）: 它暂停了我的请求，说：“别急，我就是百度，我来跟你聊。”
对外（对百度）: 它自己伪装成我，向真正的百度服务器发起了一个一模一样的HTTPS连接请求。
3.锐捷网关从百度获取“正品证书” 真正的百度服务器收到了来自锐捷网关的请求，热情地回应，并把自己的官方正品证书（由权威机构签发）递给了锐捷网关。
现在，锐捷网关与百度服务器之间，建立了一条真实、安全、加密的通道。百度以为它正在和一位普通用户通信。
4.锐捷网关伪造“高仿证书”（最关键的欺骗环节！） 锐捷网关手握百度的正品证书，它看了一眼上面的信息，比如“此证书颁发给 www.baidu.com ”。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-07-31T19:38:30+08:00">
    <meta property="article:modified_time" content="2025-07-31T19:38:30+08:00">
    <meta property="article:tag" content="技术">


  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="/avatar.jpg" alt="ShigureSora" /></a>
      <span class="app-header-title">ShigureSora</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>人是会思考的芦苇</p>
      <div class="app-header-social">
        
          <a href="https://github.com/ShigureCN" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-github" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
          </a>
        
          <a href="https://twitter.com/shiguresoradesu" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-twitter" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>twitter</title><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
          </a>
        
          <a href="https://t.me/shigure_tg" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">拒绝锐捷校园网监控,打造自由的校园网络环境</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Jul 31, 2025
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          1 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <blockquote>
<p>观前提示：要完成消除监控，需要假设你拥有了自建的 VPS 节点，并且VPS搭建的节点是安全的，采用了先进的协议如“Reality”等，如果没有的话建议先去某一位知名YouTuber那里学一下如何搭建</p></blockquote>
<h2 id="前言">前言</h2>
<hr>
<p>从去年开始，我的Azure服务器就在跑我的Word Press博客，但是个人并不喜欢Word Press的书写体验，认为Typora等众多markdown文本编辑软件是完爆Word Press的，于是将博客迁移到了GitHub pages，服务器就这样闲置了几个月，心想着服务器闲着也是闲着，跑个节点应该还是没有什么问题的，毕竟微软送给学生的100美刀也快要过期了，闲着也是浪费，于是前段时间跑了个Trojan在服务器上，但是毕竟Trojan还是使用TCP协议，拿来玩联机游戏等跑在UDP上面的话就必须要使用TCP隧道，延迟高的惊人，就没有几次能够成功使用Trojan进入过VRChat。</p>
<p>刚好某位知名YouTuber前段时间教了如何搭建Vless+reality(TCP)以及TUIC(UDP)的方法，于是我就非常舒服的搭建了我个人独享的节点，而且是Azure这种大厂的服务器，速度又快延迟又低，除了IP一眼识别机房IP之外没有缺点。</p>
<p>我一开始搭建Trojan有一个比较重要的推动就是——我不想学校能看到我的一言一行，我是自由的个体，我需要一个安全的，无日志的VPN加密我的流量。于是我开始思考——如果我只采用Vless+reality能做到抵抗锐捷的识别吗？如果不行，我需要用哪些方法补救？</p>
<hr>
<h1 id="00-删掉锐捷客户端">00. 删掉锐捷客户端</h1>
<p>是的经过1s左右的思考，我们找到了第一个绝对危险的因素——锐捷校园网认证客户端。</p>
<p>试想，一个具有管理员权限的间谍软件跑在你的电脑上面，这真的安全吗？他会不会发现你电脑中正在跑的代理？锐捷客户端想要访问你的网卡数据实在是太简单了，它只需要读一下就会发现异常，毕竟Intel和Realtek可没有生产过一个叫做“Clash Meta” “Mihomo” “Sing-box”的网卡，只要发现了就代表着你一定正在使用代理，至于能否通过管理员权限使用Wire Shark等类似的抓包方法查看里面的数据就不得而知了，但是这个趋势是危险的，毕竟他们已经知道了这个事实——“你在使用代理”</p>
<p>“等下，如果我没有锐捷认证我要怎么使用有线联网？”，你或许会这么问。这就需要你使用软路由或者想办法获取路由器的ssh/telnet权限来解决了， <a href="https://github.com/HustLion/mentohust">mentohust</a> 是常见的解决软路由/路由器校园网认证的方案，请相信我，这一步是非常有必要的。</p>
<hr>
<h1 id="01-dns解析">01. DNS解析</h1>
<p>我们都知道，当我们输入域名的时候，我们一般需要DNS解析来获取服务器IP，那么请仔细回忆一下，你在第一天使用有线连接电脑的时候是不是网管让你修改过DNS解析的服务器，并且修改至内网IP？再做个测试，当你尝试修改Firefox的“安全DNS”选择到“最大保护”的时候，你还能够在不使用clash/v2ray的时候正常的访问网站吗？</p>
<p><img src="https://photobed.shigures.me/image-20250731165409675.png" alt="1.00"></p>
<p>众所周知，当本机向DNS发出获取请求的时候，你的DNS请求消息是全部明文的，学校DNS知道——“某个IP向我发出获取某个网站的请求”，而我们的IP一般都是固定的，学校只需要对应一下名单就知道是哪个宿舍的哪个床位想要访问什么东西。</p>
<p>这是非常危险的，但是好在最新的v2rayn已经帮我们适配好了，它会将我们的DNS请求都发给我我们的VPS，让我们的VPS帮助我们向DNS发出请求，如果你不设置的话就会默认向VPS设置的DNS提供商请求，clash的配置比较麻烦，需要自己手动修改yaml文件，或者采用线上订阅转换(有订阅泄露的风险)，不再赘述</p>
<p>可以使用 <a href="https://ipleak.net/">ipleak</a> 来检测你的DNS有无泄露，如果上面出现的IP全都是你的服务器所在的国家，那么恭喜你，你的DNS没有泄露，如果出现了中国，那么可以尝试去YouTube搜索“DNS泄露”，会有解决方案的。</p>
<p>如果你不信任ipleak的解析，你也可以使用Wire Shark来抓包DNS解析记录，我的DNS分流规则是geoip查询到是cn则交给阿里云DNS，其他的交给cloud flare DNS，所以我在Wire Shark抓包得到的结果如下</p>
<p><img src="https://photobed.shigures.me/image-20250731173103195.png" alt="1.00"></p>
<p>（暑假我在校外，等回学校了再来拍一张校园网的来做一下对比）</p>
<hr>
<h1 id="02锐捷证书">02.锐捷证书</h1>
<p>锐捷证书绝对是最危险的一环，先让我们一步步开始，讲述一下每一bit在校园网中的流动</p>
<h2 id="0信任的背叛">0.“信任的‘背叛’”</h2>
<p>首先，这一切的发生都源自于“我亲手在我的电脑里面安装并且信任了锐捷提供的根证书”，这就相当于告诉电脑“以后，凡是持有‘锐捷’这家机构签发的‘身份证’（证书）的网站，无论它自称是谁，你都必须无条件相信它是真的。”，正是这份我赋予的“信任”，被锐捷的网关设备利用，上演了一出精妙的“偷天换日”。</p>
<p>我们假设我们要访问 <code>https://www.baidu.com</code> 我们目前的系统情况是：</p>
<p><strong>我 (用户电脑):</strong> 安装并信任了锐捷根证书。</p>
<p><strong>中间人 (锐捷网关):</strong> 部署在校园网的出口，能拦截所有流量。</p>
<p><strong>目的地 (百度服务器):</strong> 拥有合法的、由权威机构颁发的官方证书。</p>
<hr>
<h2 id="1发出请求">1.发出请求</h2>
<p>我在浏览器地址栏输入 <code>https://www.baidu.com</code> 并回车。我的电脑发出一个建立HTTPS连接的请求，这个请求首先会到达锐捷网关。</p>
<hr>
<h2 id="2锐捷网关拦截并兵分两路">2.锐捷网关拦截并兵分两路</h2>
<p>锐捷网关收到了请求后，<strong>并没有</strong>直接把它转发给百度。而是像一个“中间人”一样，开始了它的表演：</p>
<ul>
<li>
<p><strong>对内（对我）:</strong> 它暂停了我的请求，说：“别急，我就是百度，我来跟你聊。”</p>
</li>
<li>
<p><strong>对外（对百度）:</strong> 它自己<strong>伪装成我</strong>，向真正的百度服务器发起了一个一模一样的HTTPS连接请求。</p>
</li>
</ul>
<hr>
<h2 id="3锐捷网关从百度获取正品证书">3.锐捷网关从百度获取“正品证书”</h2>
<p>真正的百度服务器收到了来自锐捷网关的请求，热情地回应，并把自己的<strong>官方正品证书</strong>（由权威机构签发）递给了锐捷网关。</p>
<p>现在，锐捷网关与百度服务器之间，建立了一条<strong>真实、安全、加密的通道</strong>。百度以为它正在和一位普通用户通信。</p>
<hr>
<h2 id="4锐捷网关伪造高仿证书最关键的欺骗环节">4.锐捷网关伪造“高仿证书”（最关键的欺骗环节！）</h2>
<p>锐捷网关手握百度的正品证书，它看了一眼上面的信息，比如“此证书颁发给 <code>www.baidu.com</code> ”。</p>
<p>然后，它动用了那个被我信任的 <strong>“锐捷根证书”私钥</strong> ，当场 <strong>伪造</strong> 了一张新的证书。这张新证书上也写着“此证书颁发给 <code>www.baidu.com</code> ”，但它的签发机构是“锐捷”。</p>
<p>这张“高仿证书”被锐捷网关递给了在第二步中被暂停的、正在等待的我的电脑。</p>
<hr>
<h2 id="5电脑被欺骗并建立连接">5.电脑被“欺骗”并建立连接</h2>
<p>浏览器收到了这张“高仿证书”。它开始验证，发现证书上写着是给<code>www.baidu.com</code>的，没问题。</p>
<p>然后它检查签发机构——“锐捷”。浏览器在自己的“可信列表”里一查，发现我亲手安装的锐捷根证书就在里面，于是它判断：“哦，是自己人签发的，可信！”</p>
<p>浏览器便放心地与锐捷网关之间，建立了一条<strong>看似安全</strong>的加密通道。而你在地址栏依然会看到安全锁🔒。</p>
<hr>
<h2 id="6数据在中间人处被解密和窥探">6.数据在“中间人”处被解密和窥探</h2>
<p>现在，形成了两条独立的加密隧道：</p>
<ul>
<li>
<p><strong>隧道A：</strong> <code>PC &lt;---(被锐捷加密)---&gt; 锐捷网关</code></p>
</li>
<li>
<p><strong>隧道B：</strong> <code>锐捷网关 &lt;---(被百度加密)---&gt; 百度服务器</code></p>
</li>
</ul>
<p><strong>所以数据流动变成了这样：</strong></p>
<ol>
<li>假设我想搜索“南京天气”( <del>我就在南京捏</del> )，这个请求通过<strong>隧道A</strong>被加密后发送出去。</li>
<li>锐捷网关收到后，用自己的私钥将数据<strong>解密</strong>，看到了<strong>明文内容：“南京天气”</strong>。此时，它可以记录、审查、甚至修改我的请求。</li>
<li>检查完毕后，锐捷网关将这个请求用<strong>隧道B</strong>的加密方式重新加密，发送给真正的百度服务器。</li>
<li>百度服务器处理后，将天气结果通过<strong>隧道B</strong>加密发回。</li>
<li>锐捷网关再次<strong>解密</strong>，看到明文的天气结果，可以再次记录和审查。</li>
<li>最后，它用<strong>隧道A</strong>的加密方式重新加密，将结果发给浏览器。</li>
</ol>
<p>整个过程看起来似乎天衣无缝。但实际上，所有“加密”通信，都在锐捷网关这个“中间人”那里被扒得一干二净。</p>
<p><strong>总结一下，数据流是：</strong></p>
<pre tabindex="0"><code>PC -&gt; [加密A] -&gt; 锐捷网关 -&gt; [解密-&gt;明文-&gt;审查-&gt;加密B] -&gt; 百度服务器
百度服务器 -&gt; [加密B] -&gt; 锐捷网关 -&gt; [解密-&gt;明文-&gt;审查-&gt;加密A] -&gt; PC
</code></pre><p>所以我有一个自我感觉比较恰当的类比： <strong>锐捷网关（在启用证书解密功能时）是一个部署在上网必经之路上的、强制性的、带有日志记录功能的“恶意”VPS节点</strong></p>
<hr>
<p>但是，当我们使用Vless+reality的时候就不一样了</p>
<blockquote>
<p>为什么要以Vless+reality举例？因为我采用的就是这个，我还有一个Trojan服务，但是我自从我用过Vless+reality之后我就再也没有使用过，因为reality在我看来是一定比Trojan的伪装要更加“真实”的，Trojan我使用的是我自己随便搭建的一个网站，但是我的reality使用的是微软的某个服务的网址，如果你想的话你也可以设置成Windows Update，这样伪装效果说不定更好XD。当你不断访问一个看着就很奇怪的网址的时候，GFW可能不会理你，但是如果真的有一天学校想要搞你，他是一定能看出来问题的，但是如果采用reality就不会出现这种情况，毕竟没人会怀疑Windows Update XD</p></blockquote>
<h2 id="0场景">0.场景</h2>
<p><strong>我 (用户电脑):</strong> 启动了V2RayN并连接VLESS+REALITY节点。</p>
<p><strong>第一道关卡 (锐捷网关):</strong> 依然在原地，试图监控一切。</p>
<p><strong>安全堡垒 (VPS):</strong> 远在互联网的另一端，信任的伙伴。</p>
<p><strong>最终目的地 (例如</strong> <strong><code>www.google.com</code>):</strong> 真正想去的地方。</p>
<hr>
<h2 id="1请求在内部被打包封装">1.请求在内部被“打包封装”</h2>
<p>在浏览器输入 <code>https://www.google.com</code>。这个请求 <strong>并不会直接跑出电脑</strong> 。而是首先被电脑上的V2RayN客户端捕获。</p>
<p>V2RayN客户端像一个专业的保镖，它将真实意图（“我想去Google”）用VLESS协议和REALITY技术，打包成一个加密的、伪装好的数据包。</p>
<ul>
<li>
<p><strong>内部：</strong> 是访问Google的真实请求。</p>
</li>
<li>
<p><strong>外部：</strong> 看起来像是一个发往 <code>www.microsoft.com</code>（ <code>sni</code> 设置）的普通HTTPS流量。</p>
</li>
</ul>
<hr>
<h2 id="2伪装的数据包通过锐捷网关">2.伪装的数据包通过锐捷网关</h2>
<p>这个“伪装重甲包”被发了出去，抵达了锐捷网关。</p>
<p>锐捷网关看到它，开始检查：</p>
<ul>
<li>
<p><strong>看目标：</strong>  “哦，是去微软的（<code>sni</code>），很正常。”</p>
</li>
<li>
<p><strong>尝试解密：</strong> 它试图用它的“万能钥匙”（锐捷根证书）来解开这个包。<strong>但这次，完全失败了！</strong> 因为这个包的“锁”（VLESS加密）和标准的HTTPS完全不同，钥匙对不上锁芯。</p>
</li>
<li>
<p><strong>放行：</strong> 由于无法解密，也看不出明显的“VPN”特征，锐捷网关只能把它当作一个它不认识、但看起来无害的加密流量，予以放行。</p>
</li>
</ul>
<p><strong>在这一步，锐捷的所有监控和解密能力，都对数据包失效了。</strong></p>
<hr>
<h2 id="3数据包抵达安全堡垒">3.<strong>数据包抵达“安全堡垒”</strong></h2>
<p>这个数据包穿过茫茫互联网，安全抵达自己的VPS服务器。</p>
<p>我的VPS拥有唯一的、正确的钥匙，它轻松地打开了这个数据包，看到了我真实的意图：“请帮我访问<code>www.google.com</code>”。</p>
<hr>
<h2 id="4由vps代替我访问">4.由VPS代替我访问</h2>
<p>VPS作为一个“干净”的出口，代替我去访问Google，获取网页内容，然后再用同样的方式，将内容打包加密，通过原路安全地送回到我的电脑。</p>
<hr>
<h3 id="两种模式的本质区别">两种模式的本质区别</h3>
<ul>
<li>
<p><strong>不使用VLESS时：</strong> <code>PC  ---&gt;  [锐捷网关：被解密，看光光]  ---&gt;  目标网站</code></p>
</li>
<li>
<p><strong>使用VLESS+REALITY时：</strong> <code>PC  &lt;===[一条无法被锐捷看穿的私密加密隧道] ===&gt;  VPS  ---&gt;  目标网站</code></p>
</li>
</ul>
<p>在这个安全模式下，锐捷网关从一个能看穿一切的“审查官”，退化成了一个无能为力的“过路收费员”。它知道有流量经过，也传输了流量，但对于流量的<strong>内容、真实目的地、以及任何行为</strong>，它都一无所知。</p>
<hr>
<p>相当精妙的设计，不是吗？</p>
<p>或许你还有疑问——“无法被锐捷解密的数据多吗，如果锐捷可以解密所有数据，但是就是不能解密我的数据，那也岂不是很明显。”</p>
<p>这个担心同样是多余的，因为它的前提——<strong>“锐捷可以解密所有数据”——是完全错误的。</strong></p>
<p>在真实的校园网环境中，锐捷网关<strong>并不能解密所有数据</strong>。恰恰相反，它面对的是一个复杂的流量海洋，其中存在着大量它无法解密，或因策略而不会去尝试解密的“加密黑箱”流量。</p>
<p>VLESS+REALITY流量，只是众多“黑箱”中的一个，而且是伪装得最好的一个。锐捷的证书解密能力，几乎<strong>只对标准、无防护的HTTPS网页浏览流量有效</strong>。</p>
<p>因此，在锐捷网关的监控日志里，真实的画面<strong>不是</strong>：</p>
<blockquote>
<p>“解密成功、解密成功、解密成功、<strong>解密失败（你的流量）</strong>、解密成功……”</p></blockquote>
<p>而是：</p>
<blockquote>
<p>“解密成功（某个网站）、<strong>直接放行（某银行App）</strong>、<strong>直接放行（某网游）</strong>、解密成功（另一个网站）、<strong>直接放行（我们的VLESS流量）</strong>、<strong>直接放行（某同学的SSH）</strong>、解密成功……”</p></blockquote>
<p><strong>结论就是：</strong></p>
<p>你的流量并不是“万绿丛中一点红”的那个异类。它只是众多无法被解密的“黑箱”之一。</p>
<p>而VLESS+REALITY的巨大优势在于，它不仅是众多“黑箱”中的一员，还是<strong>伪装的最好的那一个</strong>。别的“黑箱”可能看起来像游戏、像App，而我们的“黑箱”看起来就像一个访问微软官网的普通HTTPS连接，是所有流量类型中最不起眼、最“正常”的一种。</p>
<p>所以请彻底放心，你不仅没有因为“无法被解密”而变得显眼，反而是安全地、低调地“藏”在了这片复杂的流量海洋之中。</p>
<hr>
<p>至此，当你完成了这里的全部操作之后，恭喜你，如果你的环境配置正确的话，锐捷已经再也无法了解你的意图了。</p>
<p>其他的就是一些简单提一下的东西，首先，不要长期使用“全局代理”，这个太明显了bro，到底是谁在每天24h都在跑Windows Update（</p>
<p>其次，打开随机设备MAC， <del>说实在的，都使用软路由了这一步应该没有什么用</del> 。</p>
<p>最后就是推荐将reality的sni设置做的合理一点点，不太推荐 <code>bing.com</code> 啊之类的，个人还是比较推荐Windows Update的，或者说哔哩哔哩的某个视频CDN服务器应该也不错，当然，愿意Wire Shark去一个个观察也不错。</p>
<hr>
<p>如果你做了上述操作的话，那么恭喜你，如果你对于这个问题还有别的看法，或者有别的问题想要一起来聊的话，欢迎在主页加我telegram或者twitter的好友</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
