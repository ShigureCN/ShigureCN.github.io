<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>技术 on ShigureSora</title>
    <link>http://localhost:1313/categories/%E6%8A%80%E6%9C%AF/</link>
    <description>Recent content in 技术 on ShigureSora</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 31 Jul 2025 19:38:30 +0800</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/%E6%8A%80%E6%9C%AF/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>拒绝锐捷校园网监控,打造自由的校园网络环境</title>
      <link>http://localhost:1313/posts/%E6%8B%92%E7%BB%9D%E9%94%90%E6%8D%B7%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9B%91%E6%8E%A7%E6%89%93%E9%80%A0%E8%87%AA%E7%94%B1%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83/</link>
      <pubDate>Thu, 31 Jul 2025 19:38:30 +0800</pubDate>
      <guid>http://localhost:1313/posts/%E6%8B%92%E7%BB%9D%E9%94%90%E6%8D%B7%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9B%91%E6%8E%A7%E6%89%93%E9%80%A0%E8%87%AA%E7%94%B1%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;观前提示：要完成消除监控，需要假设你拥有了自建的 VPS 节点，并且VPS搭建的节点是安全的，采用了先进的协议如“Reality”等，如果没有的话建议先去某一位知名YouTuber那里学一下如何搭建&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;从去年开始，我的Azure服务器就在跑我的Word Press博客，但是个人并不喜欢Word Press的书写体验，认为Typora等众多markdown文本编辑软件是完爆Word Press的，于是将博客迁移到了GitHub pages，服务器就这样闲置了几个月，心想着服务器闲着也是闲着，跑个节点应该还是没有什么问题的，毕竟微软送给学生的100美刀也快要过期了，闲着也是浪费，于是前段时间跑了个Trojan在服务器上，但是毕竟Trojan还是使用TCP协议，拿来玩联机游戏等跑在UDP上面的话就必须要使用TCP隧道，延迟高的惊人，就没有几次能够成功使用Trojan进入过VRChat。&lt;/p&gt;&#xA;&lt;p&gt;刚好某位知名YouTuber前段时间教了如何搭建Vless+reality(TCP)以及TUIC(UDP)的方法，于是我就非常舒服的搭建了我个人独享的节点，而且是Azure这种大厂的服务器，速度又快延迟又低，除了IP一眼识别机房IP之外没有缺点。&lt;/p&gt;&#xA;&lt;p&gt;我一开始搭建Trojan有一个比较重要的推动就是——我不想学校能看到我的一言一行，我是自由的个体，我需要一个安全的，无日志的VPN加密我的流量。于是我开始思考——如果我只采用Vless+reality能做到抵抗锐捷的识别吗？如果不行，我需要用哪些方法补救？&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;00-删掉锐捷客户端&#34;&gt;00. 删掉锐捷客户端&lt;/h1&gt;&#xA;&lt;p&gt;是的经过1s左右的思考，我们找到了第一个绝对危险的因素——锐捷校园网认证客户端。&lt;/p&gt;&#xA;&lt;p&gt;试想，一个具有管理员权限的间谍软件跑在你的电脑上面，这真的安全吗？他会不会发现你电脑中正在跑的代理？锐捷客户端想要访问你的网卡数据实在是太简单了，它只需要读一下就会发现异常，毕竟Intel和Realtek可没有生产过一个叫做“Clash Meta” “Mihomo” “Sing-box”的网卡，只要发现了就代表着你一定正在使用代理，至于能否通过管理员权限使用Wire Shark等类似的抓包方法查看里面的数据就不得而知了，但是这个趋势是危险的，毕竟他们已经知道了这个事实——“你在使用代理”&lt;/p&gt;&#xA;&lt;p&gt;“等下，如果我没有锐捷认证我要怎么使用有线联网？”，你或许会这么问。这就需要你使用软路由或者想办法获取路由器的ssh/telnet权限来解决了， &lt;a href=&#34;https://github.com/HustLion/mentohust&#34;&gt;mentohust&lt;/a&gt; 是常见的解决软路由/路由器校园网认证的方案，请相信我，这一步是非常有必要的。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;01-dns解析&#34;&gt;01. DNS解析&lt;/h1&gt;&#xA;&lt;p&gt;我们都知道，当我们输入域名的时候，我们一般需要DNS解析来获取服务器IP，那么请仔细回忆一下，你在第一天使用有线连接电脑的时候是不是网管让你修改过DNS解析的服务器，并且修改至内网IP？再做个测试，当你尝试修改Firefox的“安全DNS”选择到“最大保护”的时候，你还能够在不使用clash/v2ray的时候正常的访问网站吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://photobed.shigures.me/image-20250731165409675.png&#34; alt=&#34;1.00&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;众所周知，当本机向DNS发出获取请求的时候，你的DNS请求消息是全部明文的，学校DNS知道——“某个IP向我发出获取某个网站的请求”，而我们的IP一般都是固定的，学校只需要对应一下名单就知道是哪个宿舍的哪个床位想要访问什么东西。&lt;/p&gt;&#xA;&lt;p&gt;这是非常危险的，但是好在最新的v2rayn已经帮我们适配好了，它会将我们的DNS请求都发给我我们的VPS，让我们的VPS帮助我们向DNS发出请求，如果你不设置的话就会默认向VPS设置的DNS提供商请求，clash的配置比较麻烦，需要自己手动修改yaml文件，或者采用线上订阅转换(有订阅泄露的风险)，不再赘述&lt;/p&gt;&#xA;&lt;p&gt;可以使用 &lt;a href=&#34;https://ipleak.net/&#34;&gt;ipleak&lt;/a&gt; 来检测你的DNS有无泄露，如果上面出现的IP全都是你的服务器所在的国家，那么恭喜你，你的DNS没有泄露，如果出现了中国，那么可以尝试去YouTube搜索“DNS泄露”，会有解决方案的。&lt;/p&gt;&#xA;&lt;p&gt;如果你不信任ipleak的解析，你也可以使用Wire Shark来抓包DNS解析记录，我的DNS分流规则是geoip查询到是cn则交给阿里云DNS，其他的交给cloud flare DNS，所以我在Wire Shark抓包得到的结果如下&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://photobed.shigures.me/image-20250731173103195.png&#34; alt=&#34;1.00&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;（暑假我在校外，等回学校了再来拍一张校园网的来做一下对比）&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;02锐捷证书&#34;&gt;02.锐捷证书&lt;/h1&gt;&#xA;&lt;p&gt;锐捷证书绝对是最危险的一环，先让我们一步步开始，讲述一下每一bit在校园网中的流动&lt;/p&gt;&#xA;&lt;h2 id=&#34;0信任的背叛&#34;&gt;0.“信任的‘背叛’”&lt;/h2&gt;&#xA;&lt;p&gt;首先，这一切的发生都源自于“我亲手在我的电脑里面安装并且信任了锐捷提供的根证书”，这就相当于告诉电脑“以后，凡是持有‘锐捷’这家机构签发的‘身份证’（证书）的网站，无论它自称是谁，你都必须无条件相信它是真的。”，正是这份我赋予的“信任”，被锐捷的网关设备利用，上演了一出精妙的“偷天换日”。&lt;/p&gt;&#xA;&lt;p&gt;我们假设我们要访问 &lt;code&gt;https://www.baidu.com&lt;/code&gt; 我们目前的系统情况是：&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;我 (用户电脑):&lt;/strong&gt; 安装并信任了锐捷根证书。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;中间人 (锐捷网关):&lt;/strong&gt; 部署在校园网的出口，能拦截所有流量。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;目的地 (百度服务器):&lt;/strong&gt; 拥有合法的、由权威机构颁发的官方证书。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1发出请求&#34;&gt;1.发出请求&lt;/h2&gt;&#xA;&lt;p&gt;我在浏览器地址栏输入 &lt;code&gt;https://www.baidu.com&lt;/code&gt; 并回车。我的电脑发出一个建立HTTPS连接的请求，这个请求首先会到达锐捷网关。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2锐捷网关拦截并兵分两路&#34;&gt;2.锐捷网关拦截并兵分两路&lt;/h2&gt;&#xA;&lt;p&gt;锐捷网关收到了请求后，&lt;strong&gt;并没有&lt;/strong&gt;直接把它转发给百度。而是像一个“中间人”一样，开始了它的表演：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;对内（对我）:&lt;/strong&gt; 它暂停了我的请求，说：“别急，我就是百度，我来跟你聊。”&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;对外（对百度）:&lt;/strong&gt; 它自己&lt;strong&gt;伪装成我&lt;/strong&gt;，向真正的百度服务器发起了一个一模一样的HTTPS连接请求。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3锐捷网关从百度获取正品证书&#34;&gt;3.锐捷网关从百度获取“正品证书”&lt;/h2&gt;&#xA;&lt;p&gt;真正的百度服务器收到了来自锐捷网关的请求，热情地回应，并把自己的&lt;strong&gt;官方正品证书&lt;/strong&gt;（由权威机构签发）递给了锐捷网关。&lt;/p&gt;&#xA;&lt;p&gt;现在，锐捷网关与百度服务器之间，建立了一条&lt;strong&gt;真实、安全、加密的通道&lt;/strong&gt;。百度以为它正在和一位普通用户通信。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;4锐捷网关伪造高仿证书最关键的欺骗环节&#34;&gt;4.锐捷网关伪造“高仿证书”（最关键的欺骗环节！）&lt;/h2&gt;&#xA;&lt;p&gt;锐捷网关手握百度的正品证书，它看了一眼上面的信息，比如“此证书颁发给 &lt;code&gt;www.baidu.com&lt;/code&gt; ”。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
